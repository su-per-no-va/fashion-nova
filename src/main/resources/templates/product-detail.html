<!DOCTYPE html>
<html lang="en">
<head>
    <title>Product Detail</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="../images/icons/favicon.png"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/bootstrap/css/bootstrap.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="../fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="../fonts/iconic/css/material-design-iconic-font.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../fonts/linearicons-v1.0.0/icon-font.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/animate/animate.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/css-hamburgers/hamburgers.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/animsition/css/animsition.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/select2/select2.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/daterangepicker/daterangepicker.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/slick/slick.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/MagnificPopup/magnific-popup.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../vendor/perfect-scrollbar/perfect-scrollbar.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="../css/util.css">
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <!--===============================================================================================-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="animsition">

<!-- Header -->
<header class="header-v4">
    <!-- Header desktop -->
    <div class="container-menu-desktop">
        <!-- Topbar -->
        <div class="top-bar">
            <div class="content-topbar flex-sb-m h-full container">
                <div class="left-top-bar">
                    패셔니스타들을 위한, 패셔니스타들에 의한 패션노바
                </div>

                <div class="right-top-bar flex-w h-full">
                    <a href="login.html" id="auth-btn" class="flex-c-m trans-04 p-lr-25">
                        Login
                    </a>

                    <a href="question.html" class="flex-c-m trans-04 p-lr-25">
                        Q&A
                    </a>

                    <a href="my-page.html" class="flex-c-m trans-04 p-lr-25">
                        My Page
                    </a>
                </div>
            </div>
        </div>

        <div class="wrap-menu-desktop how-shadow1">
            <nav class="limiter-menu-desktop container">

                <!-- Logo desktop -->
                <a href="index.html" class="logo">
                    <img src="images/icons/logo-01.png" alt="IMG-LOGO">
                </a>

                <!-- Menu desktop -->
                <div class="menu-desktop">
                    <ul class="main-menu">

                        <li>
                            <a href="about.html">About</a>
                        </li>

                        <li class="label1" data-label1="hot">
                            <a href="product.html">Shop</a>
                        </li>

                        <li>
                            <a href="contact.html">Contact</a>
                        </li>
                    </ul>
                </div>

                <!-- Icon header -->
                <div class="wrap-icon-header flex-w flex-r-m">
                    <a id="cart-icon" href="shoping-cart.html"
                       class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart"
                       data-notify="">
                        <i class="zmdi zmdi-shopping-cart"></i>
                    </a>

                    <a id="wish-icon" href="wish-list.html"
                       class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
                       data-notify="">
                        <i class="zmdi zmdi-favorite-outline"></i>
                    </a>
                </div>
            </nav>
        </div>
    </div>
</header>

<!-- Product Detail -->
<section class="sec-product-detail bg0 p-t-65 p-b-60">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-lg-7 p-b-30">
                <div class="p-l-25 p-r-30 p-lr-0-lg">
                    <div class="wrap-slick3 flex-sb flex-w">
                        <div class="wrap-slick3-dots"></div>
                        <div class="wrap-slick3-arrows flex-sb-m flex-w"></div>
                        <div id="my-gallery" class="slick3 gallery-lb">
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-5 p-b-30">
                <div class="p-r-50 p-t-5 p-lr-0-lg">
                    <h4 class="mtext-105 cl2 js-name-detail p-b-14">

                    </h4>

                    <span class="mtext-106 cl2">

						</span>

                    <!--  -->
                    <div class="p-t-33">
                        <div class="flex-w flex-r-m p-b-10">
                            <div class="size-203 flex-c-m respon6">
                                Size
                            </div>

                            <div class="size-204 respon6-next">
                                <div class="rs1-select2 bor8 bg0">
                                    <select id="sizeSelect" class="js-select2" name="time">
                                        <option>Choose an option</option>
                                        <option>S</option>
                                        <option>M</option>
                                        <option>L</option>
                                    </select>
                                    <div class="dropDownSelect2"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex-w flex-r-m p-b-10">
                            <div class="size-203 flex-c-m respon6">
                                Color
                            </div>

                            <div class="size-204 respon6-next">
                                <div class="rs1-select2 bor8 bg0">
                                    <select id="colorSelect" class="js-select2" name="time">
                                        <option>Choose an option</option>
                                        <option>Black</option>
                                        <option>White</option>
                                        <option>Grey</option>
                                    </select>
                                    <div class="dropDownSelect2"></div>
                                </div>
                            </div>
                        </div>

                        <div class="flex-w flex-r-m p-b-10">
                            <div class="size-204 flex-w flex-m respon6-next">
                                <div class="wrap-num-product flex-w m-r-20 m-tb-10">
                                    <div
                                        class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m">
                                        <i class="fs-16 zmdi zmdi-minus"></i>
                                    </div>

                                    <input class="mtext-104 cl3 txt-center num-product"
                                           type="number"
                                           name="num-product" value="1">

                                    <div class="btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m">
                                        <i class="fs-16 zmdi zmdi-plus"></i>
                                    </div>
                                </div>

                                <div class="block2-txt-child2 flex-r p-t-3">
                                    <a href="#"
                                       class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                        <!--<img class="icon-heart1 dis-block trans-04" src="images/icons/icon-heart-01.png"
                                             alt="ICON">
                                        <img class="icon-heart2 dis-block trans-04 ab-t-l"
                                             src="images/icons/icon-heart-02.png" alt="ICON">-->
                                    </a>
                                </div>

                            </div>
                            <button
                                class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-addcart-detail"
                                style="margin: 30px;" data-item-id="">
                                Add to cart
                            </button>

                            <button
                                class="flex-c-m stext-101 cl2 size-101 bg8 bor13 hov-btn3 p-lr-15 trans-04 pointer m-tb-10"
                                onclick="alert('아직 미구현입니다. 쇼핑카트를 통해 결제해 주세요');">
                                Buy Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="bor10 m-t-50 p-t-43 p-b-40">
            <!-- Tab01 -->
            <div class="tab01">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">


                    <li class="nav-item p-b-10">
                        <a class="nav-link" data-toggle="tab" href="#information" role="tab">추가
                            정보</a>
                    </li>

                    <li class="nav-item p-b-10">
                        <a class="nav-link" data-toggle="tab" href="#reviews" role="tab">리뷰 (1)</a>
                    </li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content p-t-43">
                    <!-- - -->
                    <!-- - -->
                    <div class="tab-pane fade show active" id="information" role="tabpanel">
                        <div class="row">
                            <div class="col-sm-10 col-md-8 col-lg-6 m-lr-auto">
                                <ul class="p-lr-28 p-lr-15-sm">
                                    <li class="flex-w flex-t p-b-7">
											<span class="stext-102 cl3 size-205">
												상품 설명 :
											</span>

                                        <span id="explanation" class="stext-102 cl6 size-206">
											</span>
                                    </li>

                                    <li class="flex-w flex-t p-b-7">
											<span class="stext-102 cl3 size-205">
												Color
											</span>

                                        <span id="colorText" class="stext-102 cl6 size-206">
												Black, Grey, White
											</span>
                                    </li>

                                    <li class="flex-w flex-t p-b-7">
											<span class="stext-102 cl3 size-205">
												Size
											</span>

                                        <span id="sizeText" class="stext-102 cl6 size-206">
												S, M, L
											</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- - -->
                    <div class="tab-pane fade" id="reviews" role="tabpanel">
                        <div class="row">
                            <div class="col-sm-10 col-md-8 col-lg-6 m-lr-auto">
                                <div class="p-b-30 m-lr-15-sm">
                                    <!-- Review -->
                                    <!-- <div class="flex-w flex-t p-b-68">
                                       <div class="wrap-pic-s size-109 bor0 of-hidden m-r-18 m-t-6">
                                         <img src="images/avatar-01.jpg" alt="AVATAR">
                                       </div>

                                       <div class="size-207">
                                         <div class="flex-w flex-sb-m p-b-17">
                                             <span id="reviewName" class="mtext-107 cl2 p-r-20">
                                               아리아나 그란데
                                             </span>

                                           <span class="fs-18 cl11">
                                               <i class="zmdi zmdi-star"></i>
                                               <i class="zmdi zmdi-star"></i>
                                               <i class="zmdi zmdi-star"></i>
                                               <i class="zmdi zmdi-star"></i>
                                               <i class="zmdi zmdi-star"></i>
                                             </span>
                                           <td class="column-3">2024-08-01</td>
                                         </div>

                                         <p class="stext-102 cl6">
                                           이거 입고 남친 생겼어요
                                         </p>

                                         <div class="form-group file-upload">
                                           <td class="column-1">
                                             <img src="../images/item-cart-05.jpg" alt="IMG">
                                           </td>
                                           <td class="column-1">
                                             <img src="../images/item-cart-05.jpg" alt="IMG">
                                           </td>
                                           <td class="column-1">
                                             <img src="../images/item-cart-05.jpg" alt="IMG">
                                           </td>
                                           <td class="column-1">
                                             <img src="../images/item-cart-05.jpg" alt="IMG">
                                           </td>
                                         </div>

                                       </div>-->
                                </div>

                                <!-- Add review -->
                                <form class="w-full">

                                    <div class="flex-w flex-m p-t-50 p-b-23">
                      <span class="stext-102 cl3 m-r-16">
                        별점
                      </span>

                                        <span class="wrap-rating fs-18 cl11 pointer">
                        <i class="item-rating pointer zmdi zmdi-star-outline"></i>
                        <i class="item-rating pointer zmdi zmdi-star-outline"></i>
                        <i class="item-rating pointer zmdi zmdi-star-outline"></i>
                        <i class="item-rating pointer zmdi zmdi-star-outline"></i>
                        <i class="item-rating pointer zmdi zmdi-star-outline"></i>
                        <input class="dis-none" type="number" name="rating">
                      </span>
                                    </div>

                                    <div class="row p-b-25">
                                        <div class="col-12 p-b-5">
                                            <label class="stext-102 cl3" for="review">리뷰
                                                등록하기</label>
                                            <textarea
                                                class="size-110 bor8 stext-102 cl2 p-lr-20 p-tb-10"
                                                id="review"
                                                name="review"></textarea>

                                            <div class="form-group file-upload">
                                                <input type="file" id="file-upload" name="image"
                                                       multiple
                                                       accept="image/gif, image/jpeg, image/jpg, image/png">
                                                <p class="file-upload-text">파일 첨부는 최대 4장까지 가능하며, 5MB
                                                    이하의 GIF, JPG, JPEG,
                                                    PNG 형태로 업로드 해주세요.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <button
                                        class="flex-c-m stext-101 cl0 size-112 bg7 bor11 hov-btn3 p-lr-15 trans-04 m-b-10">
                                        등록
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>


</section>

<!-- Footer -->
<footer class="bg3 p-t-75 p-b-32">
    <div class="container">
        <div class="row">

            <div class="col-sm-6 col-lg-3 p-b-50">
                <h4 class="stext-301 cl0 p-b-30">
                    FEEDBACK
                </h4>

                <p class="stext-107 cl7 size-201">
                    언제나 고객님들의 피드백을 반영하여 항상 더욱 발전하는 패션 노바가 되겠습니다.
                </p>
            </div>

            <div class="p-t-40">
                <div class="flex-c-m flex-w p-b-18">
                    <a href="#" class="m-all-1">
                        <img src="images/icons/icon-pay-01.png" alt="ICON-PAY">
                    </a>
                </div>

                <p class="stext-107 cl6 txt-center">
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    이 홈페이지는 상업적으로 이용되지 않습니다.
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->

                </p>
            </div>
        </div>
    </div>
</footer>


<!-- Back to top -->
<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
</div>

<!--===============================================================================================-->
<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/bootstrap/js/popper.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/select2/select2.min.js"></script>
<script>
    $(".js-select2").each(function () {
        $(this).select2({
            minimumResultsForSearch: 20,
            dropdownParent: $(this).next('.dropDownSelect2')
        });
    })
</script>
<!--===============================================================================================-->
<script src="vendor/daterangepicker/moment.min.js"></script>
<script src="vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
<script src="vendor/slick/slick.min.js"></script>
<script src="js/slick-custom.js"></script>
<!--===============================================================================================-->
<script src="vendor/parallax100/parallax100.js"></script>
<script>
    $('.parallax100').parallax100();
</script>
<!--===============================================================================================-->
<script src="vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
<script>
    $('.gallery-lb').each(function () { // the containers for all your galleries
        $(this).magnificPopup({
            delegate: 'a', // the selector for gallery item
            type: 'image',
            gallery: {
                enabled: true
            },
            mainClass: 'mfp-fade'
        });
    });
</script>
<!--===============================================================================================-->
<script src="vendor/isotope/isotope.pkgd.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/sweetalert/sweetalert.min.js"></script>

<!--===============================================================================================-->
<script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>

<script>
    $('.js-pscroll').each(function () {
        $(this).css('position', 'relative');
        $(this).css('overflow', 'hidden');
        var ps = new PerfectScrollbar(this, {
            wheelSpeed: 1,
            scrollingThreshold: 1000,
            wheelPropagation: false,
        });

        $(window).on('resize', function () {
            ps.update();
        })
    });
</script>


<!--===============================================================================================-->
<script src="/js/common.js"></script>
<script src="js/main.js"></script>

<script>
    $(document).ready(function () {

        const auth = localStorage.getItem('accessToken');

        if (auth) {

        /* 장바구니 아이콘 개수 */
        window.common.getShoppingCart()
        .done(function (response) {
            if (response) {
                $('a#cart-icon')[0].dataset.notify = response.cartItemDtoList.length;
            } else {
                // no response
            }
        })
        .fail(function (error) {
            console.log(error.message)
        });

        /* 찜 아이콘 개수 */
        window.common.getWishList()
        .done(function (response) {
            if (response) {
                $('a#wish-icon')[0].dataset.notify = response.length;
            } else {
                // no response
            }
        });
        }
        const queryString = window.location.search; // 주소 가져오기
        const urlParams = new URLSearchParams(queryString); // URL 파싱하기
        const productId = urlParams.get('id');
        $('.js-addcart-detail').attr('data-item-id', productId);
        fetchAndDisplayProductImage(productId);

        $('.js-addwish-b2, .js-addwish-detail').on('click', function (e) {
            e.preventDefault();
        });

        $('.js-addwish-b2').each(function () {
            var nameProduct = $(this).parent().parent().find('.js-name-b2').html();
            $(this).on('click', function () {
                swal(nameProduct, "위시리스트 담기 완료 !", "success");

                $(this).addClass('js-addedwish-b2');
                $(this).off('click');
            });

            $(document).on('click', '.js-addcart-detail', function () {
                const productId = $(this).data('item-id');
                const count = $('input[name="num-product"]').val();
                const size = $('#sizeSelect').val();
                const color = $('#colorSelect').val();

                if (!size || size === "Choose an option") {
                    alert("사이즈를 선택해주세요.");
                    return;
                }

                if (!color || color === "Choose an option") {
                    alert("컬러를 선택해주세요.");
                    return;
                }

                $.ajax({
                    url: '/carts', // 상품을 장바구니에 추가하는 API 엔드포인트
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        productId: productId,
                        count: count,
                        size: size,
                        color: color
                    }),
                    success: function (response) {
                        alert("장바구니 추가 완료!!")
                        window.location.reload();
                    },
                    error: function () {
                        swal("장바구니 추가 실패", '로그인 후 이용해주세요.', "error");
                    }
                })
            });

            $('.js-addwish-detail').each(function () {
                var nameProduct = $(this).parent().parent().parent().find('.js-name-detail').html();

                $(this).on('click', function () {
                    swal(nameProduct, "위시리스트 담기 완료 !", "success");

                    $(this).addClass('js-addedwish-detail');
                    $(this).off('click');

                });
            });

            /*---------------------------------------------*/

            /*  $('.js-addcart-detail').each(function () {
                var nameProduct = $(this).parent().parent().parent().parent().find('.js-name-detail').html();
                if (size !== null && color !== null) {
                  $(this).on('click', function () {
                    swal(nameProduct, "장바구니 담기 완료 !", "success");
                  });
                }
              });*/

            // Add this code for the icon-heart1 click event
            $('.icon-heart1').on('click', function (e) {
                e.preventDefault();
                var nameProduct = $(this).closest('.block2-txt').find('.js-name-b2').html();
                swal(nameProduct, "위시리스트 담기 완료 !", "success");
            });
        });

        function fetchAndDisplayProductImage(productId) {
            $.ajax({
                url: `/products/${productId}`, // 실제 이미지 URL을 제공하는 경로로 변경하세요
                success: function (response) {
                    console.log(response);
                    const product = response;
                    let productDetails = response.productDetails;
                    let productReview = response.reviews;

                    const reviewCount = productReview.length;
                    $('.nav-link[href="#reviews"]').text(`리뷰 (${reviewCount})`);

                    if (product) {
                        $('#productImage').attr('src', product.imageUrl);
                        $('#productImageLink').attr('href', product.imageUrl);

                        $('.js-name-detail').html(product.product);
                        $('.mtext-106.cl2').html(`${product.price.toLocaleString()}원`);
                        $('#explanation').html(`${product.explanation}`);

                        $('#sizeSelect').empty();
                        $('#sizeSelect').append('<option>Choose an option</option>');
                        let uniqueSizes = new Set();
                        productDetails.forEach(product => {
                            uniqueSizes.add(product.size);
                        });

                        $('.btn-num-product-up').on('click', function () {
                            let numProduct = $(this).siblings('input.num-product');
                            let currentValue = parseInt(numProduct.val());
                            numProduct.val(currentValue + 1);
                        });

                        // 마이너스 버튼 클릭 시
                        $('.btn-num-product-down').on('click', function () {
                            let numProduct = $(this).siblings('input.num-product');
                            let currentValue = parseInt(numProduct.val());
                            if (currentValue > 1) {
                                numProduct.val(currentValue - 1);
                            }
                        });

                        $('.item-rating').on('click', function () {
                            const index = $(this).index() + 1;
                            $('input[name="rating"]').val(index);

                            $(this).siblings('.item-rating').removeClass('zmdi-star').addClass(
                                'zmdi-star-outline');
                            $(this).prevAll().addBack().removeClass('zmdi-star-outline').addClass(
                                'zmdi-star');
                        });

                        $('form.w-full').on('submit', function (e) {
                            e.preventDefault();

                            const review = $('#review').val();
                            const rating = $('input[name="rating"]').val();
                            const productId = $('.js-addcart-detail').data('item-id');
                            const formData = new FormData();

                            const requestDto = {
                                review: review,
                                rating: rating,
                                productId: productId
                            }

                            // formData.append('review', review);
                            // formData.append('rating', rating);
                            // formData.append('productId', productId);

                            formData.append('reviewRequestDto',
                                new Blob([JSON.stringify(requestDto)], {type: 'application/json'}))

                            const files = $('#file-upload')[0].files;
                            for (let i = 0; i < files.length; i++) {
                                formData.append('images', files[i]);
                            }

                            $.ajax({
                                url: '/reviews', // 리뷰를 제출할 API 엔드포인트
                                type: 'POST',
                                contentType: false,
                                processData: false,
                                data: formData,
                                success: function (response) {
                                    alert("리뷰 등록 완료!!");
                                    // 리뷰 등록 후 새로고침 또는 등록된 리뷰를 동적으로 추가하는 로직
                                },
                                error: function () {
                                    swal("리뷰 등록 실패", '구매하지 않은 상품에는 리뷰를 등록할 수 없습니다.', "error");
                                }
                            });
                        });

                        let sizesText = Array.from(uniqueSizes).join(', ');

                        uniqueSizes.forEach(size => {
                            $('#sizeSelect').append(`<option value="${size}">${size}</option>`)
                        })
                        $('#sizeText').text(sizesText);

                        let uniqueColors = new Set();

                        $('#sizeSelect').on('change', function () {
                            const selectedSize = $(this).val();
                            const availableColors = productDetails
                            .filter(detail => detail.size === selectedSize)
                            .map(detail => detail.color);

                            $('#colorSelect').empty();
                            $('#colorSelect').append('<option>Choose an option</option>');

                            availableColors.forEach(color => {
                                $('#colorSelect').append(
                                    `<option value="${color}">${color}</option>`);
                            });
                        });

                        $('#colorSelect').empty();
                        $('#colorSelect').append('<option>Choose an option</option>');
                        productDetails.forEach(product => {
                            uniqueColors.add(product.color);
                        });

                        let colorsArray = Array.from(uniqueColors);
                        let colorsText = '';

                        colorsArray.forEach((color, index) => {
                            $('#colorSelect').append(`<option value="${color}">${color}</option>`);
                            colorsText += color;
                            if (index < colorsArray.length - 1) {
                                colorsText += ', ';
                            }
                        });

                        $('#colorText').text(colorsText);

                        let reviewContainer = $('#reviews .p-b-30'); // 리뷰가 표시될 컨테이너를 선택합니다.
                        console.log(productReview);
                        if (Array.isArray(response.reviews) && productReview.length > 0) {
                            productReview.forEach(review => {
                                let reviewHtml = `
                        <div class="flex-w flex-t p-b-68">
                             <div class="wrap-pic-s size-109 bor0 of-hidden m-r-18 m-t-6">
                                 <img src="${review.imageUrls[0]}" alt="Review Image">
                             </div>

                            <div class="size-207">
                                <div class="flex-w flex-sb-m p-b-17">
                                    <span class="mtext-107 cl2 p-r-20">
                                        ${review.username}
                                    </span>
                                    <span class="fs-18 cl11">
                                        ${'★'.repeat(review.rating)}${'☆'.repeat(5 - review.rating)}
                                    </span>
                                </div>

                                <p class="stext-102 cl6">
                                    ${review.review}
                                </p>
                                <div class="form-group file-upload">
                            </div>
                        </div>
                   `;

                                reviewContainer.append(reviewHtml);

                            });
                        } else {
                            reviewContainer.append('<p>No reviews available.</p>');
                        }

                        if (product.imageUrlList.length > 0) {
                            console.log("나뭐있다")
                            console.log(product.imageUrlList)
                            var test = $(".slick3-dots")
                            test.empty();

                            for (let i = 0; i < product.imageUrlList.length; i++) {
                                if (i == 0) {

                                    var photoBlock = `
              <div id="productDetailArea${i}" class="item-slick3" data-thumb="${product.imageUrlList[i]}">
                  <div class="wrap-pic-w pos-relative">
                    <img id="productImage${i}" src="${product.imageUrlList[i]}" alt="IMG-PRODUCT">

                    <a id="productImageLink${i}" class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04"
                       href="${product.imageUrlList[i]}">
                      <i class="fa fa-expand"></i>
                    </a>
                  </div>
                </div>
              `
                                    var photoContainer = document.getElementById('my-gallery');
                                    photoContainer.insertAdjacentHTML('beforeend', photoBlock); // append 사용
                                } else {

                                    var sidePhoto = `
              <li class="slick-active" role="presentation">
                <img src="${product.imageUrlList[i]}">
              <a id="productImageLink${i}" href="${product.imageUrlList[i]}">
                <div class="slick3-dot-overlay"></div>
              </li>
              `;
                                    test.append(sidePhoto);
                                }
                                console.log("코드 블록 추가");
                            }
                        }
                    } else {
                        console.error('상품을 찾을 수 없습니다.');
                    }
                },
                method: 'GET',
                error: function (xhr, status, error) {
                    console.error('상품 정보를 불러오는 중 오류 발생:', error);
                }
            });
        }
    });
</script>


</body>
</html>
